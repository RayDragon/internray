<style>
.scrollmenu {
    background-color: #333;
    overflow: auto;
    white-space: nowrap;
}
.overlay{
    opacity:0.95;
    background-color:#ccc;
    position:fixed;
    width:100%;
    height:100%;
    top:0px;
    left:0px;
    z-index:1000;
}
</style>
<script>

    function allowDrop(ev) {
    ev.preventDefault();
}

function drag(ev) {
    ev.dataTransfer.setData("id", ev.target.id);

}

function drop(ev) {
    ev.preventDefault();
    var data = ev.dataTransfer.getData("id");
    alert("1"+ev.target.id+" "+data);
    if(ev.target.id == "ie"){
        alert("edit");
    }
    else if(ev.target.id == "id") {
        $('#'+data).remove();
        return;
    }
    else if(ev.target.id.indexOf('d') !== 0 ) return;
    ask_values(ev.target.id, data);
    refreshLayouts();
}
function ask_values(id, data) {
    var div = document.getElementById('fullScreen');
    div.style.display = 'block';
    div = document.getElementById('overlay1');

    if(data === 'i1') div.innerHTML=get_card("Head", "Body", "blue");
    else if(data === 'i2') div.innerHTML=get_row();
    else if(data === 'i3') div.innerHTML=get_row_element('1/2');
    else if(data === 'i4') div.innerHTML=get_row_element('1/3');
    else if(data === 'i5') div.innerHTML=get_row_element('1/4');
    else if(data === 'i6') div.innerHTML=get_row_element('2/3');
    else if(data === 'i7') div.innerHTML=get_row_element('3/4');
    $('#overlay0').val(id);
    document.getElementById('overlay2').value = document.getElementById('overlay1').innerHTML;


}
function refreshLayouts() {
        $('#temporary').html($('#tab_content').html());
    }

    $(document).ready(function () {
    refreshLayouts();
    $('#body').html('<div style="height:40px;" ondrop="drop(event)" ondragover="allowDrop(event)" class="w3-border w3-hover-grey" id="d_0"></div>');
    });

    var added = 0;
</script>

<div id="temporary" class="w3-card-4 scrollmenu">
</div>
<div class="w3-card" id="body" ondrop="drop(event)" ondragover="allowDrop(event)">

</div>
<div class="w3-green" style="display: none;">
    <div id="tab_content">
        <table>
            <tr>
                <td>
                    <div id ="i1" ondragstart="drag(event)" draggable="true" class="w3-container w3-border w3-green">
                        <header><h1 class="w3-opacity w3-center">
                                    Card
                                </h1>
                        </header>
                    <div class="w3-center w3-container">
                        Fits to container
                    </div>
                    </div></td>
                <td><div id ="i2" ondragstart="drag(event)" draggable="true" class="w3-container w3-border w3-dark-grey">
                    <header><h1 class="w3-opacity w3-center">
                        Row
                            </h1>
                    </header>
                    <div class="w3-center w3-container">
                        Covers the body
                    </div>
                    </div></td>
                <td><div id ="i3" ondragstart="drag(event)" draggable="true" class="w3-container w3-border w3-black">
                        <header><h1 class="w3-opacity w3-center">
                        Row(1/2)
                        </h1>
                        </header>
                    <div class="w3-center w3-container">
                            Covers the body
                    </div>
                    </div></td>
                <td><div id ="i4" ondragstart="drag(event)" draggable="true" class="w3-container w3-border w3-black">
                        <header><h1 class="w3-opacity w3-center">
                            Row(1/3)
                        </h1>
                        </header>
                    <div class="w3-center w3-container">
                        Covers the body
                    </div>
                    </div></td>
                <td><div id ="i5" ondragstart="drag(event)" draggable="true" class="w3-container w3-border w3-black">
                    <header><h1 class="w3-opacity w3-center">
                    Row(1/4)
                    </h1>
                    </header>
                    <div class="w3-center w3-container">
                        Covers the body
                    </div>
                    </div></td>
                <td><div id ="i6" ondragstart="drag(event)" draggable="true" class="w3-container w3-border w3-black">
                    <header><h1 class="w3-opacity w3-center">
                        Row(2/3)
                    </h1>
                    </header>
                    <div class="w3-center w3-container">
                    Covers the body
                    </div>
                    </div></td>
                <td><div id ="i7" ondragstart="drag(event)" draggable="true" class="w3-container w3-border w3-black">
                    <header><h1 class="w3-opacity w3-center">
                        Row(3/4)
                    </h1>
                    </header>
                    <div class="w3-center w3-container">
                    Covers the body
                    </div>
                    </div></td>
                <td><div id ="i8" ondragstart="drag(event)" draggable="true" class="w3-container w3-border w3-grey">
                    <header><h1 class="w3-opacity w3-center">
                        Navigation Bar
                    </h1>
                    </header>
                    <div class="w3-center w3-container">
                        Not fixed
                    </div>
                    </div></td>
                <td>
                    <div id="ie" ondrop="drop(event)" ondragover="allowDrop(event)" class="w3-container w3-border w3-light-green">
                        <header><h1 class="w3-opacity w3-center">
                                    Edit
                                </h1>
                        </header>
                    <div class="w3-center w3-container">
                        Drag Elements here to edit them
                    </div>
                    </div></td>
                <td>
                    <div id="id" ondrop="drop(event)" ondragover="allowDrop(event)" class="w3-container w3-border w3-red">
                        <header id="id"><h1 id="id" class="w3-opacity w3-center">
                                    Delete
                                </h1>
                        </header>
                    <div id="id" class="w3-center w3-container">
                        Fits to container
                    </div>
                    </div></td>
            </tr></table>
    </div>
    <div id="card1">
        <script>
            var card=['<div draggable=true ondragstart="drag(event)" class="w3-container w3-',//color
                    '" id="',//id
                    '"><header><h1 class="w3-opacity w3-center">',//head
                    '</h1></header><div class="w3-center w3-container">',//body
                    '</div></div>'];

            function get_card(head, body, color){
                if(color==undefined) color='green';
                added++;
                return card[0] + color + card[1] + "id_"+added + card[2] + head + card[3] + body + get_dropper()+ card[4];

            }
        </script>
    </div>
    <div id="row1">
        <script>
            var row = ['<div class="w3-row">',//containers
                        '</div>' ];
            var row_element=
                [
                    '<div class="w3-half">',
                    '<div class="w3-third">',
                    '<div class="w3-quarter">',
                    '<div class="w3-twothird">',
                    '<div class="w3-threequarter">'
                ];
            function get_row(){return row[0] + get_dropper("grey") + row[1];}
            function get_row_element(data){
                if(data==='1/2') return row_element[0] + get_dropper("black") + row[1];
                if(data==='1/3') return row_element[1] + get_dropper("black") + row[1];
                if(data==='1/4') return row_element[2] + get_dropper("black") + row[1];
                if(data==='2/3') return row_element[3] + get_dropper("black") + row[1];
                if(data==='3/4') return row_element[4] + get_dropper("black") + row[1];
            }
        </script>
    </div>
    <div id="dropper">
        <script>
            var dropper=['<div style="width: 100%; height:40px;" class="w3-hover-grey w3-','"ondragstart="drag(event)" draggable="true" ondrop="drop(event)" ondragover="allowDrop(event)" class="w3-border w3-hover-grey" id="',//id
                '"></div>' ];
            var drlast=0;
            function get_dropper(color) {
                if(color == undefined) color='white';
                drlast++;
                return dropper[0]+color+dropper[1]+"d_"+drlast+dropper[2];
            }
        </script>

    </div>
</div>
<div class="overlay w3-center" id="fullScreen" style="display: none;">
    <input placeholder="Id to insert" id="overlay0">
    <div class="w3-black" id="overlay1">
    </div>
    <textarea cols="50" rows="10" id="overlay2"></textarea><br>
    <button class="w3-button w3-hover-green" onclick="check();">Check</button>
    <button class="w3-button w3-hover-green" onclick="update();">Update</button>
    <script>
        function check() {
            document.getElementById('overlay1').innerHTML = document.getElementById('overlay2').value;
        }
        function update(){
            check();
            var id=document.getElementById("overlay0").value;
            var div=document.getElementById(id);
            $('#'+id).replaceWith(document.getElementById('overlay1').innerHTML + get_dropper());
            document.getElementById('fullScreen').style.display = 'none';
        }
    </script>

</div>